{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2><i class="material-icons">settings</i> User Settings</h2>
  <p class="text-muted">Configure your personal preferences</p>
  
  <form method="post" action="{{ url_for('dashboard.user_settings') }}">
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
    
    <!-- Date Format Settings -->
    <div class="card mb-4">
      <div class="card-header">
        <h5><i class="material-icons">calendar_today</i> Date Format</h5>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="date_format" class="form-label">Preferred Date Format</label>
          <select class="form-select" id="date_format" name="date_format">
            <option value="%Y-%m-%d" {% if current_user.date_format == '%Y-%m-%d' %}selected{% endif %}>YYYY-MM-DD (2025-08-19)</option>
            <option value="%d.%m.%Y" {% if current_user.date_format == '%d.%m.%Y' %}selected{% endif %}>DD.MM.YYYY (19.08.2025)</option>
            <option value="%d/%m/%Y" {% if current_user.date_format == '%d/%m/%Y' %}selected{% endif %}>DD/MM/YYYY (19/08/2025)</option>
            <option value="%m/%d/%Y" {% if current_user.date_format == '%m/%d/%Y' %}selected{% endif %}>MM/DD/YYYY (08/19/2025)</option>
          </select>
          <small class="form-text text-muted">This format will be used throughout the application for displaying dates.</small>
        </div>
      </div>
    </div>
    
    <!-- NOTAM Notification Settings -->
    <div class="card mb-4">
      <div class="card-header">
        <h5><i class="material-icons">announcement</i> NOTAM Notifications</h5>
      </div>
      <div class="card-body">
        <div class="mb-3">
          <label for="home_area" class="form-label">Home Area for NOTAM Notifications</label>
          <select class="form-select" id="home_area" name="home_area">
            {% for value, label in available_areas %}
            <option value="{{ value }}" {% if current_user.home_area == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
          </select>
          <small class="form-text text-muted">
            Select your primary flying area to receive email notifications about new NOTAMs. 
            Choose "No NOTAM notifications" to disable email alerts.
          </small>
        </div>
        
        {% if current_user.home_area %}
        <div class="alert alert-info">
          <i class="material-icons">info</i>
          <strong>Active:</strong> You will receive email notifications for new NOTAMs in {{ current_user.home_area }}.
        </div>
        {% else %}
        <div class="alert alert-secondary">
          <i class="material-icons">notifications_off</i>
          <strong>Disabled:</strong> NOTAM email notifications are currently disabled.
        </div>
        {% endif %}
      </div>
    </div>
    
    <div class="d-flex justify-content-between">
      <a href="{{ url_for('dashboard.index') }}" class="btn btn-secondary">
        <i class="material-icons">arrow_back</i> Back to Dashboard
      </a>
      <button type="submit" class="btn btn-primary">
        <i class="material-icons">save</i> Save Settings
      </button>
    </div>
  </form>
</div>

<style>
.card-header h5 {
  margin: 0;
  display: flex;
  align-items: center;
}

.card-header h5 i {
  margin-right: 0.5rem;
}

.alert i {
  vertical-align: middle;
  margin-right: 0.5rem;
}

.btn i {
  font-size: 1.2rem;
  margin-right: 0.25rem;
  vertical-align: middle;
}
</style>
{% endblock %}
