# KanardiaCloud NOTAM Fetch Cron Job Configuration
# 
# This cron job runs the NOTAM fetch script every 12 hours
# Edit with: crontab -e
#
# IMPORTANT: Make sure to update the paths below to match your installation
# Replace /path/to/your/KanardiaCloud with the actual path

# Fetch NOTAMs every 12 hours (at 06:00 and 18:00)
0 6,18 * * * cd /path/to/your/KanardiaCloud && /path/to/your/KanardiaCloud/.venv/bin/python /path/to/your/KanardiaCloud/fetch_notams.py >> /path/to/your/KanardiaCloud/logs/cron.log 2>&1

# Alternative: Every 6 hours for more frequent updates
# 0 */6 * * * cd /path/to/your/KanardiaCloud && /path/to/your/KanardiaCloud/.venv/bin/python /path/to/your/KanardiaCloud/fetch_notams.py >> /path/to/your/KanardiaCloud/logs/cron.log 2>&1

# Cleanup old NOTAMs once a week (Sundays at 02:00)
0 2 * * 0 cd /path/to/your/KanardiaCloud && /path/to/your/KanardiaCloud/.venv/bin/python -c "from src.app import create_app; from src.services.notam_service import notam_service; app = create_app(); app.app_context().push(); notam_service.cleanup_expired_notams(days_old=30)" >> /path/to/your/KanardiaCloud/logs/cleanup.log 2>&1

# INSTALLATION INSTRUCTIONS:
# 1. Replace all instances of "/path/to/your/KanardiaCloud" with your actual installation path
#    Example: /home/rok/src/Cloud-1
#
# 2. Make sure the logs directory exists:
#    mkdir -p /path/to/your/KanardiaCloud/logs
#
# 3. Make the fetch script executable:
#    chmod +x /path/to/your/KanardiaCloud/fetch_notams.py
#
# 4. Test the script manually first:
#    cd /path/to/your/KanardiaCloud && ./.venv/bin/python fetch_notams.py
#
# 5. Add to your crontab:
#    crontab -e
#    Then paste the cron job lines above (after updating paths)
#
# 6. Verify the cron job is installed:
#    crontab -l
#
# TROUBLESHOOTING:
# - Check logs: tail -f /path/to/your/KanardiaCloud/logs/cron.log
# - Test manually: Run the command from the cron job directly in terminal
# - Verify permissions: Make sure the user running cron has read/write access to all files
# - Check environment: Cron jobs run with minimal environment variables
